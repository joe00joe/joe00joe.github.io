---
layout: post
title: 代码大全-第12章基本数据类型
categories: Blog
description: 第12章基本数据类型
keywords: github,blog-test
---

### 12.1 数值概论

+ **避免使用魔法值**。使用常量进行替代。好处是便于修改，增强可读性
+ **预防除零错**
+ **类型转换需是显式的**

### 12.2 整数

+ **检查整数除法**  7/10可能是0,与可能是负无穷大
+ **检查整数溢出**  整数相加或者整数相乘时可能会发生溢出。估计操作的最大取值，选取足够大的数据类型变量接收操作结果

### 12.3 浮点数

+ **避免数量级相差巨大的浮点数进行加减运算** 比如32位浮点数，5000000.1-5000000.2可能等于0.0。一系列数字相加时， 先排序数字，从最小的数字开始加。
+ **避免等量判断**  应该相等的数据不一定相等。比如10个0.1相加不一定等于1.0

```java
double sum = 0.0;
for(int i = 0; i < 10; i++){
    sum += 0.1;
}
if(sum == 1.0){
    System.out.println("same");
}else{
    System.out.println("different");
}
```

​      解决方法： 确定一个可接受的精度误差，然后用布尔函数确定是否接近

+ **处理舍入误差**。解决方法:1)换用精度更高的数据类型；2）使用足够长的字符串或位长足够的整数。
+ **检查有无相应的数值库支持 ** 比如Java中的`BigDecimal`

### 12.4字符和字符串

+ **避免魔法字符和魔法字符串** 
+ **避免off-by-one错误** 避免读写操作超出字符串未尾。
+ 若要支持多种语言，统一使用`unicode/utf8`编码
+ **采用某种一致的字符串类型转换策略** 如果你使用了多种字符串类型，有一种常用方法能维护各种字符串类型，那就是在程序中把所有字符串都保存为一种格式，同时在尽可能靠近输入和输出操作的位置把字符串转换为其他格式。

### 12.5 布尔变量

+ **使用布尔变量简化复杂布尔判断**

```java
boolean  finished = elementIndex < 0 || MAX_ELEMENTS < elementIndex;
boolean repeatedEntry = elementIdex == lastElementIndex;
if(finished || repeatedEntry){
    '''
}
```

### 12.6 枚举变量和常量

+ **用枚举变量、常量提高可读性、简化修改**

### 12.7 数组

+ **访问避免出数组越界错主*误**
+ **如果数组是多维的，保证下标使用顺序应是正确的** 比如二维数组，使用col、row替代i、j。

### 







