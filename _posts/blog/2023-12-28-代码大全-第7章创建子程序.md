---
layout: post
title: 代码大全-第7章创建子程序
categories: Blog
description: 第7章创建子程序
keywords: github,blog-test
---

### 7.1创建子程序的理由

1.降低复杂度。屏敝子程序的低层实现细节，让程序员通过函数名即可知道它的作用，减少心智负担。

2.避免重复代码。将重复的代码块提出成子程序，子程序可以复用。

3.隐藏代码执行顺序、复杂的指针操作和与硬件相关的细节。

4.简化复杂的布尔判断。如多维数组中的边界判断。

5.性能优化。形成子程序，可以方便检查哪些代码导致了性能问题。

### 7.2 子程序的质量

高内聚的子程序才是好的子程序

功能上的内聚性（最好）： 一个子程序只做一件事，如Sin()。

顺序上的内聚性：在子程序内包含有需要按特定顺序执行的操作，这些步骤需要共享数据，而且只有在全部执行完毕后才完成了一项完救的功能。如果某个子程序根据出生日期计算出年龄，再根据年龄计算退休时间，那么就是在顺序上内聚了

通信上的内聚性： 一个子程序中的不同操作使用了同样的数据，但不存在其他任何联系。如，子程序根据出生日期计算年龄,然重新根据出生日期重新计算退休时间。

改进方法： 在`getRetrieTime`函数中调用`getAge`函数。

过程上内聚性（不好）：一个子程序中的操作是按特定的顺序进行的。一个例子是依次获取员工的姓名、住址和电话号码的子程序。

改进： 将获取员工姓名等操作封装成独立的子程序，在`getEmployee`中调用。

逻辑上的内聚性（不好）：指若干操作被放入同一个子程序中通过传入的控制标志选择执行其中的一项操作。个例子是名为` ParseAll`的子程序，它根据传入的控制标志来决定是解析出的是整数、浮点数等。

改进方法：分离出多个子程序，如`parseLong`、`parseDouble`

### 7.3 子程序的命名

子程序的名字应清晰的表达出它的功能。

过程使用“动词加宾语”的方法命名，如`getId`

方法命名相比于过程可省略宾语，`Document.get`比`Document.getDocument`好。

### 7.4 子程序的参数和返回值

1.按照输入-修改-输出的顺序放置参数

2.不把输入参数用作工作变量，因为这样做输入参数名容易产生误解

```java
int increment(int inputVal){
    inputVal = inputVal + 1;
    return inputVal;
    
}
```

3.为子程序传递维持期接口抽象性的变量

错误示列：参数应该是id而不是一个Student对象

```java
Student detail(Student student){
    if(student != null && stuent.getId() != null){
        return baseMapper.selectById(student.getId())
    }else{
        return null;
  
   }
}
```

4.检查所有可能的路径，确保返回值是正确的

5.不要返回对局部数据的指针或引用。因为局部变量在函数退出后就失效了。

### 7.4 其它

1.别使用宏子程序 。比如 `#define Cube(a) a*a*a` ，当传入`x+1` 时不能正确展开。